<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>csp.js by PrajitR</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">csp.js</h1>
        <p class="header">Visualize solving constraint satisfaction problems.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/PrajitR/cspjs/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/PrajitR/cspjs/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/PrajitR/cspjs">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/PrajitR">PrajitR</a></p>


      </header>
      <section>
      <button id="nqueens-button">Start NQueens</button>
      <br/>
      <span id="nqueens" style="font-family: Consolas, monospace;"></span>
      <script src="csp.js"></script>
      <script>
      (function() {
      function solve_nqueens() {
        var SIZE = 8, board = {}, variables = {}, constraints = [];

        function not_colliding(i, j) {
          function diagonal(a, b) {
            return Math.abs(a[0] - b[0]) == Math.abs(a[1] - b[1]);
          }
          return !(i[0] == j[0] || i[1] == j[1] || diagonal(i, j));
        }

        for (var i = 0; i < SIZE; i++) {
          var queenPos = [];
          for (var j = 0; j < SIZE; j++) {
            queenPos.push([i, j]);
            if (i != j) { constraints.push([i, j, not_colliding]); }
          }
          variables[i] = queenPos;
        }
        board.variables = variables;
        board.constraints = constraints;

        var node = document.getElementById('nqueens');
        function visualize(assigned) {
          var text = '', divider = '';
          for (var i = 0; i < SIZE * 6 + 1; i++) { divider += '-'; }
          text += divider + '<br/>'
          for (var i = 0; i < SIZE; i++) {
            for (var j = 0; j < SIZE; j++) {
              text += '|';
              var mid = assigned[j] && assigned[j][0][1] == i ? j : '&nbsp; ';
              text += '&nbsp; ' + mid + ' &nbsp;';
            }
            text += '|<br/>' + divider + '<br/>'
          }
          node.innerHTML = text;
        }
        board.cb = visualize;
        board.timeStep = 500;

        visualize({});
        csp.solve(board);
      }
      document.getElementById('nqueens-button').onclick = solve_nqueens;
      })();
      </script>
      </section>
      <footer>
        <p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
